# Оглавление

# Описание сущностей, атрибутов и ограничений

##  1. Учет библиотечного фонда
###  "Библиотечный фонд" as repository

**Поле**        | **Тип**       | **Ограничения**                 | **Пояснения**
:---            | :---          | :---                            | :---
id              | SERIAL        | PK                              | "Идентификатор"
title           | VARCHAR[300]  | not null                        | "Наименование"
instances       | INTEGER       | not null/CHECK(>= 0)            | "Количество экземпляров"
isbn            | INTEGER       | CHECK(pattern)/unique/not null  | "isbn"
year            | DATE          |                                 | "Год издания"
bindings_id     | INTEGER       | FK                              | "Вид переплета"
publishers_id   | INTEGER       | FK                              | "Издательство"
genres_id       | INTEGER       | FK                              | "Жанр"
---
Пример заполнения:
**Поле**        | **Значение 1**        | **Значение 2**
:---            | :---                  | :---
id              | 1                     |
title           | Мастер и Маргарита    |
instances       | 20                    |
isbn            | 978-5-08-006744-0     |
year            | 2022                  |
bindings_id     | 1                     |
publishers_id   | 1                     |
genres_id       | 1                     |
---
---

###  "Вид переплета" as bindings
**Поле**        | **Тип**       | **Ограничения**   | **Пояснения**
:---            | :---          | :---              | :---
id              | SERIAL        | PK                | "Идентификатор"
type            | VARCHAR[10]   | not null          | "Тип переплета"
---
Пример заполнения:
**Поле**        | **Значение 1**    | **Значение 2**
:---            | :---              | :---
id              | 1                 | 2
type            | Твердый переплет  | Мягкий переплет
---
---

###  "Авторы" as authors
**Поле**        | **Тип**       | **Ограничения**   | **Пояснения**
:---            | :---          | :---              | :---
id              | SERIAL        | PK                | "Идентификатор"
fio             | VARCHAR[50]   | CHECK (буквы)     | "ФИО"
country         | VARCHAR[30]   | Россия            | "Страна рождения"
---
Пример заполнения:
**Поле**        | **Значение 1**                | **Значение 2**
:---            | :---                          | :---
id              | 1                             | 2
fio             | Булгаков Михаил Афонасьевич   |
country         | Россия                        |
---
---

###  "Штрихкоды" as barcodes
**Поле**        | **Тип**       | **Ограничения**   | **Пояснения**
:---            | :---          | :---              | :---
id              | SERIAL        | PK                | "Идентификатор"
value           | INTEGER       | not null          | "Штрихкод"
repository_id   | INTEGER       | FK/not null       | "Публикация"
---

###  "Библиография" as bibliography
**Поле**        | **Тип**       | **Ограничения**   | **Пояснения**
:---            | :---          | :---              | :---
repository_id   | INTEGER       | FK                | "Идентификатор издания"
authors_id      | INTEGER       | FK                | "Идентификатор автора"
---
---

###  "Жанры" as genres
**Поле**        | **Тип**       | **Ограничения**   | **Пояснения**
:---            | :---          | :---              | :---
id              | SERIAL        | PK                | "Идентификатор"
value           | VARCHAR[50]   | not null          | "Жанр"
---
Пример заполнения:
**Поле**        | **Значение 1**                | **Значение 2**
:---            | :---                          | :---
id              | 1                             | 2
value           | Трагедия
---
---

###  "Издательства" as publishers
**Поле**        | **Тип**       | **Ограничения**   | **Пояснения**
:---            | :---          | :---              | :---
id              | SERIAL        | PK                | "Идентификатор"
name            | VARCHAR[50]   |                   | "Наименование"
address         | VARCHAR[300]  |                   | "Адрес"
phone           | INTEGER       |                   | "Телефон"
contactname     | VARCHAR[150]  |                   | "Контакты-имя"
---
Пример заполнения:
**Поле**        | **Значение 1**    | **Значение 2**
:---            | :---              | :---
id              | 1                 | 2
name            | Детская литература|
address         | Москва            |
phone           | 8(495)1234567     |
contactname     | Александр         |
---
---

##  2. Учет читателей

###  "Карточки читателей" as accounts
**Поле**        | **Тип**       | **Ограничения**   | **Пояснения**
:---            | :---          | :---              | :---
id              | SERIAL        | PK                | "Идентификатор"
fname           | VARCHAR[50]   | CHECK(буквы)      | "Имя"
sname           | VARCHAR[50]   | CHECK(буквы)      | "Отчество"
lname           | VARCHAR[50]   | CHECK(буквы)      | "Фамилия"
---

###  "Взрослые" as adults
**Поле**        | **Тип**       | **Ограничения**           | **Пояснения**
:---            | :---          | :---                      | :---
accounts_id     |               | FK/not null/unique        | "Аккаунт"
address         | VARCHAR[300]  | not null                  | "Адрес"
phone           | INTEGER       | CHECK(pattern)/not null   | "Телефон"
passport_id     | INTEGER       | FK/not null               | "Пасспорт"
---

###  "Паспорта" as pasports
**Поле**        | **Тип**       | **Ограничения**           | **Пояснения**
:---            | :---          | :---                      | :---
id              | SERIAL        | PK                        | "Идентификатор"
serial          | INTEGER       | CHECK(pattern)/not null   | "Серия"
number          | INTEGER       | CHECK(pattern)/not null   | "Номер"
---

###  "Дети" as children
**Поле**        | **Тип**       | **Ограничения**   | **Пояснения**
:---            | :---          | :---              | :---
accounts_id     |INTEGER        | FK/not null       | "Аккаунт"
sertificate_id  |INTEGER        | FK/not null       | "Сертификат"
adult_id        |INTEGER        | FK/not null       | "Аккаунт родителя"
---

###  "Свидетельства о рождении" as certificates
**Поле**        | **Тип**       | **Ограничения**   | **Пояснения**
:---            | :---          | :---              | :---
id              | SERIAL        | PK                | "Идентификатор"
serial          | VARCHAR[10]   | not null          | "Серия"
number          | INTEGER       | not null          | "Номер"
date            | DATE          | not null          | "Дата выдачи"
---

##  3. Учет движения книг
###  "Реестр операций" as activities
**Поле**        | **Тип**       | **Ограничения**   | **Пояснения**
:---            | :---          | :---              | :---
id              | SERIAL        | PK                | "Идентификатор"
date            | DATE          | not null          | "Дата события"
account_id      | INTEGER       | not null          | "Карточка читателя"
barcode_id      | INTEGER       | not null          | "Объект события"
---

###  "Выдача книг" as book_out
**Поле**        | **Тип**       | **Ограничения**   | **Пояснения**
:---            | :---          | :---              | :---
activities_id   | SERIAL        | not null          | "Идентификатор события"
plan_date       | DATE          | not null          | "Ожидаемая дата возврата"
---

###  "Возврат книг" as book_in
**Поле**        | **Тип**       | **Ограничения**   | **Пояснения**
:---            | :---          | :---              | :---
book_in_fact    | DATE          | not null          | "Фактическая дата возврата"
penalty         | MONEY         | calc()            | "Штраф"
late            | INTEGER       | calc()            | "Период задержки возврата книги"
activities_id   | INTEGER       | FK/not null       | "Идентификатор события"
---

###  "Бронирование" as booking
**Поле**        | **Тип**       | **Ограничения**   | **Пояснения**
:---            | :---          | :---              | :---
id              | SERIAL        | PK                | "Идентификатор"
activities_id   | INTEGER       | FK/not null       | "Идентификатор события"
---
